{% extends "base.html" %}
{% block title %}User{% endblock %}
{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}

{% if messages %}
<div id="formerror" class="ui modal">
    {% for category, message in messages %}
        <div class="header">
            {{ category }}
        </div>
        <div class="content">
            <div class="description">
                {{ message }}
            </div>
        </div>
    {% endfor %}
    <div class="actions">
        <div class="ui button">Close</div>
    </div>
</div>
<script type="text/javascript">
    $(function(){
        $('#formerror.modal')
            .modal('setting', 'transition', 'Fade Up')
            .modal('show')
        ;
    });
</script>
{% endif %}
{% endwith %}

<h3 class="ui horizontal header divider">Quantify credits for {{ submission.full_name_with_link|safe }}</h3>
<p>Please take a couple of minutes to credit the sources of this submission: what percentage of it is new, what percentage of it is coming from or inspired by another  submission.
<p>The numbers should add up to 100.
<p>The list contains all submissions by team {{ submission.team.name }} and submissions that team members have looked at.
<p>The numbers will be used for computing the total contributivity of the submissions by propagating the current contributivity backwards.
<p>Please be honest and fair as much as possible.
<div class="ten wide column">
    <form class="ui form" method="post" action="" name="save">
        {{ credit_form.hidden_tag() }}
            <table border="1" class="dataframe ui blue celled table sortable">
                <thead>
                    <tr style="text-align: left;">
                        <th>submission</th>
                        <th>credit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>novelty</td>
                        <td><input id="novelty" name="novelty" type="text" value="0"></td>
                    </tr>
                {% for name_credit in credit_form.name_credits %}
                    <tr>
                        <td><a href="{{ name_credit[2] }}">{{ name_credit[0] }}</a></td>
                        <td><input id="{{ name_credit[0] }}" name="{{ name_credit[0] }}" type="text" value="{{ name_credit[1] }}"></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <input type="submit" value="Submit" class="ui submit button">
        </div>
        </table>
    </form>
</div>

{% endblock %}